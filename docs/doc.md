# BCI

### Объединённая программа

#### Сценарий использования
Задаётся текст, наблюдатель следит за символами, которые вначале некоторое время
горят <зелёным> цветом, потом <чёрным>, в конце <красным>, что означает, что
наблюдателю пора перевести взгляд, т.к. на подходе следуцющая буква. Далее некоторое
время всё горит одним цветом и повторяется со следующей буквой.

Опционально: кроме этого каждый раз, когда наблюдатель видит очередное мигание,
он нажимает на пробел, что фиксируется меткой LSL.

#### Параметры
* "window_x": -1920, "window_y": 0 - настройки монитора
* "num_cols": 11, "num_rows": 4 - число столбцов и строк
    (для клавиатуры как на телефоне нужно именно так)
* "text": "ТЕСТ" - текст, который вводится
* "t_pause": 1 - время паузы между полнцыми циклами показов символов
* "t_cont": 2 - время, которым символ показывается зелёным или красным в начале и в конце соответственно
* "t_show": 10 - время полного цикла показа
* "alphabet": "1234567890_ЙЦУКЕНГШЩЗХФЫВАПРОЛДЖЭЁЯЧСМИТЬБЮЪ" - алфавит
* "FPS": 60 - задаём кол-во fps
* "font_name": "Arial" - название шрифта
* "font_size": 40 - размер шрифта
* "x_move": false - делать ли перемещения по горизонтали
* "y_move": false - делать ли перемещения по вертикали
* "z_move": true - делать ли увеличения и уменьшения в размере
* "frequency_mean": 1 - средняя частота показа символа
* "frequency_std": 0.5 - дисперсия частоты показа символа
* "delay_t1_scale": 0.5 - ...
* "delay_t2_scale": 0.5 - ...
* "background": [255, 255, 255] - цвет фона
* "letter_foreground": [0, 0, 0] - цвет букв
* "start_fg": [0, 255, 0] - цвет-маркер буквы в начале показа
* "end_fg": [255, 0, 0] - цвет-маркер буквы в конце показа
* "is_random_delay": false - ...
* "amplitude_x_scale": 0.5 - амплитуда движения по x
* "amplitude_y_scale": 0.5 - амплитуда движения по y

#### Формат меток
* Начало эксперимента - start_experiment
* Конец эксперимента - end_experiment
* Информация о действии с символом - <символ>_start_x: <0/1/-1>, y: <0/1/-1>, z: <0/1/-1>
    0 - двежения по оси нет
    1 - движение по оси положительное (вправо/вниз/на нас)
    1 - движение по оси отрицательное (влево/вверх/от нас)
* Начало показа очередного целевого символа - <символ>_show_start
* Конец показа очередного целевого символа - <символ>_show_end
* Нажат пробел пользователем - pressed_space

### Режим мигания
Описание общих параметров:
* `language` - ... `ru`, `en`
* `keyboard_mode` - ... `en`, `rus`, `default`
* `numbers_flag` - ... true, false
* `rus_text` - ...
* `en_text` - ...

Описание параметров (для каждого символа):
* `buf_size` - ...
* `pause_mode` - ...
* `freq` - частота отображения букв (мб для каждого символа своя),
* `eps_freq` - случ. зн-е из равномерного распр-я в окрестности нуля, кот. для каждой буквы добавляется к `freq`,
* `duty` - доля времени в каждой фазе цикла отображения, когда символ виден,
* `eps_duty` - аналогично,
* `pause` - время паузы в сек. в режиме `pause` в пар-ре `pause_mode`,
* `eps_pause` - аналогично.

Описание параметров отображения `view`:
* `theme` - ... `dark`, `light`
* `mute_mode` - ...
* `fullscreen` - ...
* `fps` - ...
* `bg_dark` - ...
* `fg_dark` - ...
* `mg_dark` - ...
* `bg_light` - ...
* `fg_light` - ...
* `mg_light` - ...
* `mute_coeff` - ...
* `scale` - ...


Возможные значения:
1. `pause_mode`:
    * `duty` - паузы считаются по значениям `freq` и `duty`,
    * `pause` - пауза задаётся явно в сек.
2. `mute_mode`:
    * `color` - приглушённый цвет неактивных букв задаётся явно в виде [R, G, B],
    * `coeff` - цвет задаётся взвешенным средним между `bg`, и `fg` с коэффициентом `mute_coeff`.
